import{j as O,k as T,l as E}from"./QueryClientProvider--ER5Is9g.js";function S(a){return{onFetch:(e,t)=>{var p,y,v,F,b;const n=e.options,d=(v=(y=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:y.fetchMore)==null?void 0:v.direction,f=((F=e.state.data)==null?void 0:F.pages)||[],m=((b=e.state.data)==null?void 0:b.pageParams)||[];let o={pages:[],pageParams:[]},g=0;const h=async()=>{let i=!1;const u=r=>{Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(e.signal.aborted?i=!0:e.signal.addEventListener("abort",()=>{i=!0}),e.signal)})},j=O(e.options,e.fetchOptions),w=async(r,s,l)=>{if(i)return Promise.reject();if(s==null&&r.pages.length)return Promise.resolve(r);const P={queryKey:e.queryKey,pageParam:s,direction:l?"backward":"forward",meta:e.options.meta};u(P);const N=await j(P),{maxPages:q}=e.options,k=l?T:E;return{pages:k(r.pages,N,q),pageParams:k(r.pageParams,s,q)}};if(d&&f.length){const r=d==="backward",s=r?K:c,l={pages:f,pageParams:m},P=s(n,l);o=await w(l,P,r)}else{const r=a??f.length;do{const s=g===0?m[0]??n.initialPageParam:c(n,o);if(g>0&&s==null)break;o=await w(o,s),g++}while(g<r)}return o};e.options.persister?e.fetchFn=()=>{var i,u;return(u=(i=e.options).persister)==null?void 0:u.call(i,h,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=h}}}function c(a,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?a.getNextPageParam(e[n],e,t[n],t):void 0}function K(a,{pages:e,pageParams:t}){var n;return e.length>0?(n=a.getPreviousPageParam)==null?void 0:n.call(a,e[0],e,t[0],t):void 0}function B(a,e){return e?c(a,e)!=null:!1}function C(a,e){return!e||!a.getPreviousPageParam?!1:K(a,e)!=null}export{C as a,B as h,S as i};
