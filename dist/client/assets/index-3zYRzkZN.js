var ut=e=>{throw TypeError(e)};var G=(e,t,s)=>t.has(e)||ut("Cannot "+s);var i=(e,t,s)=>(G(e,t,"read from private field"),s?s.call(e):t.get(e)),f=(e,t,s)=>t.has(e)?ut("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),h=(e,t,s,r)=>(G(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),l=(e,t,s)=>(G(e,t,"access private method"),s);import{S as Ct,q as lt,t as O,u as H,r as P,b as Ot,v as $,x as dt,y as Mt,f as wt,z as St,A as ft,n as yt,B as Et}from"./QueryClientProvider--ER5Is9g.js";import{r as S}from"./chunk-7R3XDUXW-vtjdb0p3.js";var m,a,k,g,D,z,T,C,J,B,L,U,N,Q,Y,n,Z,K,q,tt,et,st,it,rt,Rt,mt,Pt=(mt=class extends Ct{constructor(t,s){super();f(this,n);f(this,m);f(this,a);f(this,k);f(this,g);f(this,D);f(this,z);f(this,T);f(this,C);f(this,J);f(this,B);f(this,L);f(this,U);f(this,N);f(this,Q);f(this,Y,new Set);this.options=s,h(this,m,t),h(this,C,null),h(this,T,lt()),this.options.experimental_prefetchInRender||i(this,T).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,a).addObserver(this),pt(i(this,a),this.options)?l(this,n,Z).call(this):this.updateResult(),l(this,n,et).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return at(i(this,a),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return at(i(this,a),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,l(this,n,st).call(this),l(this,n,it).call(this),i(this,a).removeObserver(this)}setOptions(t,s){const r=this.options,d=i(this,a);if(this.options=i(this,m).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof O(this.options.enabled,i(this,a))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");l(this,n,rt).call(this),i(this,a).setOptions(this.options),r._defaulted&&!H(this.options,r)&&i(this,m).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,a),observer:this});const c=this.hasListeners();c&&bt(i(this,a),d,this.options,r)&&l(this,n,Z).call(this),this.updateResult(s),c&&(i(this,a)!==d||O(this.options.enabled,i(this,a))!==O(r.enabled,i(this,a))||P(this.options.staleTime,i(this,a))!==P(r.staleTime,i(this,a)))&&l(this,n,K).call(this);const o=l(this,n,q).call(this);c&&(i(this,a)!==d||O(this.options.enabled,i(this,a))!==O(r.enabled,i(this,a))||o!==i(this,Q))&&l(this,n,tt).call(this,o)}getOptimisticResult(t){const s=i(this,m).getQueryCache().build(i(this,m),t),r=this.createResult(s,t);return Qt(this,r)&&(h(this,g,r),h(this,z,this.options),h(this,D,i(this,a).state)),r}getCurrentResult(){return i(this,g)}trackResult(t,s){const r={};return Object.keys(t).forEach(d=>{Object.defineProperty(r,d,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(d),s==null||s(d),t[d])})}),r}trackProp(t){i(this,Y).add(t)}getCurrentQuery(){return i(this,a)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=i(this,m).defaultQueryOptions(t),r=i(this,m).getQueryCache().build(i(this,m),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return l(this,n,Z).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,g)))}createResult(t,s){var ct;const r=i(this,a),d=this.options,c=i(this,g),o=i(this,D),M=i(this,z),y=t!==r?t.state:i(this,k),{state:R}=t;let u={...R},x=!1,v;if(s._optimisticResults){const b=this.hasListeners(),j=!b&&pt(t,s),F=b&&bt(t,r,s,d);(j||F)&&(u={...u,...St(R.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:_,errorUpdatedAt:E,status:w}=u;if(s.select&&u.data!==void 0)if(c&&u.data===(o==null?void 0:o.data)&&s.select===i(this,J))v=i(this,B);else try{h(this,J,s.select),v=s.select(u.data),v=ft(c==null?void 0:c.data,v,s),h(this,B,v),h(this,C,null)}catch(b){h(this,C,b)}else v=u.data;if(s.placeholderData!==void 0&&v===void 0&&w==="pending"){let b;if(c!=null&&c.isPlaceholderData&&s.placeholderData===(M==null?void 0:M.placeholderData))b=c.data;else if(b=typeof s.placeholderData=="function"?s.placeholderData((ct=i(this,L))==null?void 0:ct.state.data,i(this,L)):s.placeholderData,s.select&&b!==void 0)try{b=s.select(b),h(this,C,null)}catch(j){h(this,C,j)}b!==void 0&&(w="success",v=ft(c==null?void 0:c.data,b,s),x=!0)}i(this,C)&&(_=i(this,C),v=i(this,B),E=Date.now(),w="error");const W=u.fetchStatus==="fetching",X=w==="pending",V=w==="error",ot=X&&W,ht=v!==void 0,I={status:w,fetchStatus:u.fetchStatus,isPending:X,isSuccess:w==="success",isError:V,isInitialLoading:ot,isLoading:ot,data:v,dataUpdatedAt:u.dataUpdatedAt,error:_,errorUpdatedAt:E,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>y.dataUpdateCount||u.errorUpdateCount>y.errorUpdateCount,isFetching:W,isRefetching:W&&!X,isLoadingError:V&&!ht,isPaused:u.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:V&&ht,isStale:nt(t,s),refetch:this.refetch,promise:i(this,T)};if(this.options.experimental_prefetchInRender){const b=A=>{I.status==="error"?A.reject(I.error):I.data!==void 0&&A.resolve(I.data)},j=()=>{const A=h(this,T,I.promise=lt());b(A)},F=i(this,T);switch(F.status){case"pending":t.queryHash===r.queryHash&&b(F);break;case"fulfilled":(I.status==="error"||I.data!==F.value)&&j();break;case"rejected":(I.status!=="error"||I.error!==F.reason)&&j();break}}return I}updateResult(t){const s=i(this,g),r=this.createResult(i(this,a),this.options);if(h(this,D,i(this,a).state),h(this,z,this.options),i(this,D).data!==void 0&&h(this,L,i(this,a)),H(r,s))return;h(this,g,r);const d={},c=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,M=typeof o=="function"?o():o;if(M==="all"||!M&&!i(this,Y).size)return!0;const p=new Set(M??i(this,Y));return this.options.throwOnError&&p.add("error"),Object.keys(i(this,g)).some(y=>{const R=y;return i(this,g)[R]!==s[R]&&p.has(R)})};(t==null?void 0:t.listeners)!==!1&&c()&&(d.listeners=!0),l(this,n,Rt).call(this,{...d,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&l(this,n,et).call(this)}},m=new WeakMap,a=new WeakMap,k=new WeakMap,g=new WeakMap,D=new WeakMap,z=new WeakMap,T=new WeakMap,C=new WeakMap,J=new WeakMap,B=new WeakMap,L=new WeakMap,U=new WeakMap,N=new WeakMap,Q=new WeakMap,Y=new WeakMap,n=new WeakSet,Z=function(t){l(this,n,rt).call(this);let s=i(this,a).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(Ot)),s},K=function(){l(this,n,st).call(this);const t=P(this.options.staleTime,i(this,a));if($||i(this,g).isStale||!dt(t))return;const r=Mt(i(this,g).dataUpdatedAt,t)+1;h(this,U,setTimeout(()=>{i(this,g).isStale||this.updateResult()},r))},q=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,a)):this.options.refetchInterval)??!1},tt=function(t){l(this,n,it).call(this),h(this,Q,t),!($||O(this.options.enabled,i(this,a))===!1||!dt(i(this,Q))||i(this,Q)===0)&&h(this,N,setInterval(()=>{(this.options.refetchIntervalInBackground||wt.isFocused())&&l(this,n,Z).call(this)},i(this,Q)))},et=function(){l(this,n,K).call(this),l(this,n,tt).call(this,l(this,n,q).call(this))},st=function(){i(this,U)&&(clearTimeout(i(this,U)),h(this,U,void 0))},it=function(){i(this,N)&&(clearInterval(i(this,N)),h(this,N,void 0))},rt=function(){const t=i(this,m).getQueryCache().build(i(this,m),this.options);if(t===i(this,a))return;const s=i(this,a);h(this,a,t),h(this,k,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},Rt=function(t){yt.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(i(this,g))}),i(this,m).getQueryCache().notify({query:i(this,a),type:"observerResultsUpdated"})})},mt);function Tt(e,t){return O(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function pt(e,t){return Tt(e,t)||e.state.data!==void 0&&at(e,t,t.refetchOnMount)}function at(e,t,s){if(O(t.enabled,e)!==!1){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&nt(e,t)}return!1}function bt(e,t,s,r){return(e!==t||O(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&nt(e,s)}function nt(e,t){return O(t.enabled,e)!==!1&&e.isStaleByTime(P(t.staleTime,e))}function Qt(e,t){return!H(e.getCurrentResult(),t)}var It=S.createContext(!1),xt=()=>S.useContext(It);It.Provider;function Dt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ut=S.createContext(Dt()),Nt=()=>S.useContext(Ut);function jt(e,t){return typeof e=="function"?e(...t):!!e}function gt(){}var Ft=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},zt=e=>{S.useEffect(()=>{e.clearReset()},[e])},Bt=({result:e,errorResetBoundary:t,throwOnError:s,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&jt(s,[e.error,r]),Lt=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Yt=(e,t)=>e.isLoading&&e.isFetching&&!t,_t=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,vt=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Wt(e,t,s){var R,u,x,v,_;const r=Et(),d=xt(),c=Nt(),o=r.defaultQueryOptions(e);(u=(R=r.getDefaultOptions().queries)==null?void 0:R._experimental_beforeQuery)==null||u.call(R,o),o._optimisticResults=d?"isRestoring":"optimistic",Lt(o),Ft(o,c),zt(c);const M=!r.getQueryCache().get(o.queryHash),[p]=S.useState(()=>new t(r,o)),y=p.getOptimisticResult(o);if(S.useSyncExternalStore(S.useCallback(E=>{const w=d?gt:p.subscribe(yt.batchCalls(E));return p.updateResult(),w},[p,d]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),S.useEffect(()=>{p.setOptions(o,{listeners:!1})},[o,p]),_t(o,y))throw vt(o,p,c);if(Bt({result:y,errorResetBoundary:c,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw y.error;if((v=(x=r.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||v.call(x,o,y),o.experimental_prefetchInRender&&!$&&Yt(y,d)){const E=M?vt(o,p,c):(_=r.getQueryCache().get(o.queryHash))==null?void 0:_.promise;E==null||E.catch(gt).finally(()=>{p.updateResult()})}return o.notifyOnChangeProps?y:p.trackResult(y)}const Xt=async e=>{const t={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxMGE5NTc2Y2QxYTA0N2UwYzU0NTBlMDBjZmNjYWMxOCIsIm5iZiI6MTczMjc5NjU5OC42MTgyODM1LCJzdWIiOiI2NzQ4NTVkMDM3OWIwM2E5ZjFkMDYxNDciLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0._rpYXOgfo-Zbb1LVIoGZg0liZISGZszlArBdhKuMcVc"}},s=await fetch(`https://api.themoviedb.org/3/movie/${e}?language=en-US`,t);if(!s.ok)throw new Error("Failed to fetch movie details");return s.json()},Vt=async({pageParam:e=1})=>{const t={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIxMGE5NTc2Y2QxYTA0N2UwYzU0NTBlMDBjZmNjYWMxOCIsIm5iZiI6MTczMjc5NjU5OC42MTgyODM1LCJzdWIiOiI2NzQ4NTVkMDM3OWIwM2E5ZjFkMDYxNDciLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0._rpYXOgfo-Zbb1LVIoGZg0liZISGZszlArBdhKuMcVc"}},s=await fetch(`https://api.themoviedb.org/3/discover/movie?include_adult=false&include_video=false&language=en-US&page=${e}&sort_by=popularity.desc`,t);if(!s.ok)throw new Error("Network response was not ok");return s.json()};export{Pt as Q,Xt as a,Vt as f,Wt as u};
