import{w as x}from"./QueryClientProvider--ER5Is9g.js";import{p as v,r as P,l as s}from"./chunk-7R3XDUXW-vtjdb0p3.js";import{Q as N,u as b,f as w}from"./index-3zYRzkZN.js";import{i as p,h as y,a as j}from"./infiniteQueryBehavior-B-RWMxTA.js";var E=class extends N{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:p()},t)}getOptimisticResult(e){return e.behavior=p(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var m,f;const{state:a}=e,h=super.createResult(e,t),{isFetching:o,isRefetching:c,isError:n,isRefetchError:i}=h,r=(f=(m=a.fetchMeta)==null?void 0:m.fetchMore)==null?void 0:f.direction,l=n&&r==="forward",d=o&&r==="forward",u=n&&r==="backward",g=o&&r==="backward";return{...h,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:y(t,a.data),hasPreviousPage:j(t,a.data),isFetchNextPageError:l,isFetchingNextPage:d,isFetchPreviousPageError:u,isFetchingPreviousPage:g,isRefetchError:i&&!l&&!u,isRefetching:c&&!d&&!g}}};function M(e,t){return b(e,E)}function C(){return[{title:"Movies"},{name:"description",content:"Movies List Tech Test"}]}const R=()=>{const e=v(),{data:t,error:a,fetchNextPage:h,hasNextPage:o,isFetchingNextPage:c}=M({queryKey:["movieLists"],queryFn:w,initialPageParam:1,getNextPageParam:i=>i.page<i.total_pages?i.page+1:void 0}),n=()=>{window.innerHeight+document.documentElement.scrollTop+1>=document.documentElement.scrollHeight&&o&&!c&&h()};return P.useEffect(()=>(window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}),[o,c]),a?s.jsxs("p",{children:["Error: ",a.message]}):s.jsx("div",{className:"bg-black min-h-screen text-white",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-8",children:"Movies"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t==null?void 0:t.pages.map(i=>i.results.map(r=>s.jsxs("div",{onClick:()=>e(`/movie/${r.id}`),className:"group relative bg-gray-800 rounded-lg overflow-hidden shadow-lg transform transition duration-300 hover:scale-105 cursor-pointer",children:[s.jsx("img",{src:`https://image.tmdb.org/t/p/w500${r.poster_path}`,alt:r.title,className:"w-full h-72 object-cover"}),s.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 flex flex-col justify-end p-4 transition-opacity",children:[s.jsx("h3",{className:"text-lg font-bold",children:r.title}),s.jsx("p",{className:"text-sm text-gray-300",children:r.release_date})]})]},r.id)))}),c&&s.jsx("p",{className:"text-center mt-4",children:"Loading more movies ðŸŽŠ..."}),!o&&s.jsx("p",{className:"text-center mt-4",children:"Looks empty in here ðŸ˜¢"})]})})},T=x(R);export{T as default,C as meta};
